# 🔒 NAS組み込みファイアウォール - ポートカスタマイズ入力ガイド

**作成日**: 2025-01-27  
**対象**: UGreen DXP2800 NAS環境

---

## 📋 概要

NASの組み込みファイアウォールで「ポートカスタマイズ」を選択した際の、ポート番号の入力方法を説明します。

---

## 🚀 ポートカスタマイズの入力方法

### 基本的な入力手順

1. **「新規ルール」画面で「ポート」セクションを確認**
2. **「カスタマイズ」を選択**（ラジオボタンで選択）
3. **入力フィールドが表示される**ので、そこにポート番号を入力
4. **他の設定項目に進む**

---

## 📝 入力形式の例

### 単一ポート（最も一般的）

**例1: HTTPS（8443）**
```
8443
```
または
```
8443/tcp
```

**例2: SSH（23456）**
```
23456
```
または
```
23456/tcp
```

### ポート範囲（複数のポートを範囲で指定）

**例: 8000から9000までのポート**
```
8000:9000/tcp
```

### 複数ポート（カンマ区切り）

**例: 8443と23456の両方を許可**
```
8443/tcp,23456/tcp
```

---

## 🔍 よく使用されるポート番号

### 外部から許可するポート

| ポート番号 | サービス | 入力例 |
|-----------|---------|--------|
| 8443 | HTTPS（Nginx Proxy Manager） | `8443` または `8443/tcp` |
| 23456 | SSH（管理用） | `23456` または `23456/tcp` |

### 内部ネットワークからのみ許可するポート

| ポート番号 | サービス | 入力例 |
|-----------|---------|--------|
| 9001 | nas-dashboard | `9001` または `9001/tcp` |
| 8001 | amazon-analytics | `8001` または `8001/tcp` |
| 8080 | document-automation | `8080` または `8080/tcp` |
| 5002 | meeting-minutes-byc | `5002` または `5002/tcp` |
| 3002 | nas-dashboard-monitoring (frontend) | `3002` または `3002/tcp` |
| 8002 | nas-dashboard-monitoring (backend) | `8002` または `8002/tcp` |
| 8111 | youtube-to-notion | `8111` または `8111/tcp` |
| 8181 | Nginx Proxy Manager Admin | `8181` または `8181/tcp` |

---

## ⚠️ 注意事項

### プロトコルの指定

- **TCPがデフォルトの場合**: ポート番号のみを入力（例: `8443`）
- **TCPを明示的に指定する場合**: `8443/tcp` と入力
- **UDPを指定する場合**: `8443/udp` と入力
- **TCPとUDPの両方を許可する場合**: `8443/tcp,8443/udp` と入力

### 入力エラーの確認

- ポート番号は **1-65535** の範囲で入力してください
- 不正な形式（例: 文字列、特殊文字）を入力するとエラーが表示される場合があります
- エラーメッセージが表示された場合は、入力形式を確認してください

---

## 🔧 トラブルシューティング

### 入力フィールドが表示されない

1. 「カスタマイズ」が選択されているか確認
2. ページを再読み込みしてみる
3. ブラウザのキャッシュをクリアしてみる

### 入力したポート番号が保存されない

1. 入力形式が正しいか確認（例: `8443` または `8443/tcp`）
2. 他の必須項目（権限、ソースIPなど）が設定されているか確認
3. 「OK」ボタンをクリックして保存されているか確認

### ポート番号の形式がわからない

- **最もシンプルな形式**: ポート番号のみ（例: `8443`）
- **プロトコルを明示する場合**: ポート番号/プロトコル（例: `8443/tcp`）
- **一般的には**: ポート番号のみの入力で問題ありません（TCPがデフォルト）

---

## 📚 参考資料

- **NAS組み込みファイアウォール設定ガイド**: `docs/deployment/NAS_BUILTIN_FIREWALL_SETUP.md`
- **セキュリティチェックリスト**: `docs/deployment/SECURITY_CHECKLIST.md`

---

**作成日**: 2025-01-27  
**更新日**: 2025-01-27

